# Frontend Scripts 目录说明

本目录包含了前端项目相关的各种实用脚本工具。以下是每个脚本的详细说明：

## 脚本列表

### 🔧 基础设置脚本

#### `setup-env.sh`
**功能**: 设置 CI 和 SCM 的通用环境变量
- 跳过各种工具的下载安装（Playwright、Cypress、Taiko等）
- 配置镜像源以提高下载速度
- 在 CI 环境中生效相关环境变量

#### `scm_base.sh`
**功能**: SCM（Source Code Management）基础脚本
- 提供通用的工具函数（rushx、rushtool等）
- 设置项目根目录和环境路径
- 包含依赖安装和环境准备的工具函数

#### `post-rush-install.sh`
**功能**: Rush 安装后的后处理脚本
- 执行文案和图标同步任务
- 处理 Starling 相关的同步操作
- 可通过环境变量控制是否跳过后处理

### 🔍 代码质量和检查

#### `block-unresolved-conflict.sh`
**功能**: 阻止包含未解决冲突标记的代码提交
- 检测 Git 冲突标记符（<<<<<<<、=======、>>>>>>>）
- 排除特定文件和目录的检查
- 防止包含冲突的代码被误提交

#### `find-empty-files.sh`
**功能**: 查找并删除空的 TypeScript 和样式文件
- 扫描指定目录下的 .tsx 和 .less 文件
- 自动删除空文件（0 行内容）
- 支持自定义搜索目录

#### `subdir-cloc.sh`
**功能**: 计算指定目录下各子目录的代码行数统计
- 使用 cloc 工具统计代码行数
- 输出 CSV 格式的统计结果
- 包含文件数、语言、空白行、注释行和代码行统计

### 🔀 Git 分支管理

#### `scan-outdate-branch.sh`
**功能**: 扫描过期的 Git 分支
- 检查 2 个月前的分支
- 列出包含未合并提交的过期分支
- 生成分支删除建议列表

#### `del-branch.sh`
**功能**: 批量删除指定的远程 Git 分支
- 预定义要删除的分支列表
- 安全删除远程分支
- 包含分支存在性检查

#### `pre-push-hook.sh`
**功能**: Git 预推送钩子
- 防止非 CI 用户直接推送到 master 分支
- 检查 pnpm-lock.yaml 文件状态
- 提供安全的代码推送检查

### 🏗️ 构建和发布

#### `card_builder_static_build.sh`
**功能**: 构建 Card Builder 静态资源
- 清理旧的构建目录
- 安装和构建 Lynx Runtime 相关依赖
- 复制 SDK 文件到输出目录

#### `publish-pro.sh`
**功能**: 在 SCM 内执行包发布逻辑
- 配置发布相关的环境变量
- 支持 beta/alpha 等不同发布类型
- 处理 NPM 包的发布流程

### 🔄 工具函数

#### `retry.sh`
**功能**: 提供重试机制的工具函数
- 支持自定义重试次数和等待时间
- 记录失败次数和退出码
- 可与其他脚本组合使用

## 使用说明

1. 大部分脚本需要在项目根目录或 frontend 目录下执行
2. 某些脚本依赖于 Rush、Git 等工具，确保环境中已安装
3. CI/CD 相关脚本会检查环境变量，确保在正确的环境中执行
4. 建议在使用前阅读脚本内容，了解具体的执行逻辑

## 注意事项

- 部分脚本会修改文件或执行危险操作，使用前请备份重要数据
- Git 相关脚本会影响远程仓库，请谨慎使用
- 环境相关脚本可能影响全局环境变量